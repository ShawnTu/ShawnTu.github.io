<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>食戟挑战之测试组件 | 酶窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2016/12/15/食戟挑战之测试组件/">食戟挑战之测试组件</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">December 15 2016</p>
  </section>

  <section class="article-entry">
    <h1 id="食戟挑战之测试组件"><a href="#食戟挑战之测试组件" class="headerlink" title="食戟挑战之测试组件"></a>食戟挑战之测试组件</h1><h2 id="React测试工具介绍"><a href="#React测试工具介绍" class="headerlink" title="React测试工具介绍"></a>React测试工具介绍</h2><blockquote>
<p>React测试工具介绍</p>
</blockquote>
<p>React自带了测试工具：<strong>React.addons.TestUtils</strong><br>使用TestUtils可以：</p>
<ul>
<li>模拟操作</li>
<li>渲染组件</li>
<li>定位和操作子组件<br>TestUtils只是封装了和React相关的内容，还需要结合其他测试工具使用</li>
</ul>
<blockquote>
<p>React测试工具入门</p>
</blockquote>
<p><img src="/images/QQ截图20161215120844.png" alt="Alt text"></p>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>1、测试React组件</p>
<pre><code>var React = require(&quot;react/addons&quot;);
var TestUtils = React.addons.TestUtils;
var CheckboxWithLabel = require(&quot;./CheckboxWithLabel.jsx&quot;);

describe(&quot;test CheckboxWithLabel component&quot;, function () {
it(&quot;check label text&quot;, function () {
    var checkbox = TestUtils.renderIntoDocument(&lt;CheckboxWithLabel text=&quot;你是否爱吃橘子&quot; on=&quot;爱吃&quot; off=&quot;不爱吃&quot;&gt;&lt;/CheckboxWithLabel&gt;);
    var text = React.findDOMNode(checkbox).textContent;
    expect(text).toContain(&quot;你是否爱吃橘子&quot;);
})
})
</code></pre><h2 id="隔离React组件"><a href="#隔离React组件" class="headerlink" title="隔离React组件"></a>隔离React组件</h2><blockquote>
<p>为什么要隔离React组件</p>
</blockquote>
<p><img src="/images/QQ截图20161215121027.png" alt="Alt text"></p>
<ul>
<li>提高效率</li>
<li>减少影响</li>
<li>专注目标</li>
</ul>
<blockquote>
<p>模拟组件、函数和事件</p>
</blockquote>
<p>rewireify：可以在代码中操作局部变量</p>
<p>UserBadge.<strong>set</strong>(“UserImage”, mockUserImageComponent);</p>
<p>var jasmineReact = require(“jasmine-react-helpers”);</p>
<p>jasmineReact.spyOnClass(HelloRandom, “getRandomAuthor”)<br>  .andReturn({name: “Fake User”, githubUsername: “fakeGithub”});</p>
<p>React.addons.TestUtils.Simulate.click(node);</p>
<p>React.addons.TestUtils.Simulate.change(node, {target: {value: ‘Hello, world’}});</p>
<p>React.addons.TestUtils.Simulate.keyDown(node, {key: “Enter”});</p>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>2、模拟组件、函数和事件</p>
<pre><code>var React = require(&quot;react/addons&quot;);
var TestUtils = React.addons.TestUtils;
var jasmineReact = require(&quot;jasmine-react-helpers&quot;);
var Survey = require(&quot;./Survey.jsx&quot;);

describe(&quot;test Survey component&quot;, function () {
it(&quot;mock CheckboxWithLabel component&quot;, function () {
    var survey = TestUtils.renderIntoDocument(&lt;Survey&gt;&lt;/Survey&gt;);
    var target = TestUtils.scryRenderedDOMComponentsWithTag(survey, &quot;input&quot;);
    TestUtils.Simulate.change(target[0]);
    TestUtils.Simulate.change(target[1]);
    expect(React.findDOMNode(survey).textContent).not.toContain(&quot;不&quot;);
})
})
</code></pre><h2 id="测试Mixin"><a href="#测试Mixin" class="headerlink" title="测试Mixin"></a>测试Mixin</h2><blockquote>
<p>Mixin测试方法</p>
</blockquote>
<p>Mixin本质上是一个<strong>对象</strong>，包含多个<strong>方法</strong><br>因此，测试Mixin的方式就是测试Mixin所包含的方法<br>Mixin有两种测试方法：</p>
<ul>
<li>直接测试：直接对Mixin的函数进行测试</li>
<li>组件环境下测试：在组件中测试Mixin，模拟实际使用场景</li>
</ul>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>3、测试Mixin</p>
<pre><code>var randomNumberMixin = require(&quot;./randomNumberMixin.jsx&quot;);

describe(&quot;test randomNumberMixin&quot;, function () {
it(&quot;should return a random number&quot;, function () {
    expect(randomNumberMixin.randomNumber()).toBeLessThan(1);
});

it(&quot;should return many numbers&quot;, function () {
    expect(randomNumberMixin.randomNumbers(6).length).toBe(6);
})
})
</code></pre>
  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> 酶窝 </p>
      <p class="subtitle"> 酶窝 </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="食戟挑战之测试组件"><a h"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'http://yoursite.com/2016/12/15/食戟挑战之测试组件/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
