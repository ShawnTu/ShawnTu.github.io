<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>动画效果乱炖 | 酶窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2016/12/08/动画效果乱炖/">动画效果乱炖</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">December 08 2016</p>
  </section>

  <section class="article-entry">
    <h1 id="动画效果乱炖"><a href="#动画效果乱炖" class="headerlink" title="动画效果乱炖"></a>动画效果乱炖</h1><h2 id="网页动画介绍"><a href="#网页动画介绍" class="headerlink" title="网页动画介绍"></a>网页动画介绍</h2><blockquote>
<p>什么是网页动画</p>
</blockquote>
<p><img src="/images/QQ截图20161208194419.png" alt="Alt text"></p>
<p><img src="/images/QQ截图20161208194552.png" alt="Alt text"></p>
<blockquote>
<p>实现方法介绍</p>
</blockquote>
<p>CSS3：scale、transform、rotate、animation、transition<br>JS模拟：animate()、show()、setInterval、setTimeout<br>rAF（requestAnimationFrame）：优化后的setInterval和setTimeout<br>SVG：&lt; animate &gt;</p>
<blockquote>
<p>实现方法对比</p>
</blockquote>
<p><img src="/images/QQ截图20161208194858.png" alt="Alt text"></p>
<h2 id="CSS3动画介绍"><a href="#CSS3动画介绍" class="headerlink" title="CSS3动画介绍"></a>CSS3动画介绍</h2><blockquote>
<p>什么是CSS3动画</p>
</blockquote>
<p>CSS3动画就是使用<strong>CSS3标准</strong>中的技术来绘制动画<br>HTML、CSS和JS都有标准，按照严格的标准制定流程进行制定<br><strong>标准≠实现</strong>，标准由专家组制定，浏览器厂商<strong>不一定</strong>完全遵守标准</p>
<blockquote>
<p>CSS3动画特点</p>
</blockquote>
<p>CSS3动画底层由浏览器实现具体的绘制流程，因此<strong>性能最好</strong><br>CSS3动画能满足绝大部分交互的需求，上手简单，易于使用<br>但是，由于CSS3标准比较新，很多旧浏览器都<strong>无法兼容</strong></p>
<blockquote>
<p>CSS3动画使用方法</p>
</blockquote>
<p><img src="/images/QQ截图20161208195150.png" alt="Alt text"></p>
<p>常见的CSS3动画用法</p>
<p><img src="/images/QQ截图20161208195210.png" alt="Alt text"></p>
<p>React中CSS3动画用法</p>
<p><img src="/images/QQ截图20161208195241.png" alt="Alt text"></p>
<p>React中CSS3动画用法</p>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>1、在React中使用CSS3动画</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>React动画<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">   .example-enter &#123;</div><div class="line">     opacity: 0.01;</div><div class="line">     transition: opacity .5s ease-in;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   .example-enter.example-enter-active &#123;</div><div class="line">     opacity: 1;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   .example-leave &#123;</div><div class="line">     opacity: 1;</div><div class="line">     transition: opacity .5s ease-in;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   .example-leave.example-leave-active &#123;</div><div class="line">     opacity: 0.01;</div><div class="line">   &#125;</div><div class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react-with-addons.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">	        </div><div class="line">	var ReactCSSTransitionGroup = React.addons.CSSTransitionGroup;</div><div class="line">       var TodoList = React.createClass(&#123;</div><div class="line">         getInitialState: function() &#123;</div><div class="line">           return &#123;items: ['hello', 'world', 'click', 'me']&#125;;</div><div class="line">         &#125;,</div><div class="line">         handleAdd: function() &#123;</div><div class="line">           var newItems =</div><div class="line">             this.state.items.concat([prompt('Enter some text')]);</div><div class="line">           this.setState(&#123;items: newItems&#125;);</div><div class="line">         &#125;,</div><div class="line">         handleRemove: function(i) &#123;</div><div class="line">           var newItems = this.state.items;</div><div class="line">           newItems.splice(i, 1);</div><div class="line">           this.setState(&#123;items: newItems&#125;);</div><div class="line">         &#125;,</div><div class="line">         render: function() &#123;</div><div class="line">           var items = this.state.items.map(function(item, i) &#123;</div><div class="line">             return (</div><div class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleRemove.bind(this,</span> <span class="attr">i</span>)&#125;&gt;</span></div><div class="line">                 &#123;item&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">             );</div><div class="line">           &#125;.bind(this));</div><div class="line">           return (</div><div class="line">             <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleAdd&#125;</span>&gt;</span>Add Item<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">ReactCSSTransitionGroup</span> <span class="attr">transitionName</span>=<span class="string">"example"</span>&gt;</span></div><div class="line">                 &#123;items&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">ReactCSSTransitionGroup</span>&gt;</span></div><div class="line">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           );</div><div class="line">         &#125;</div><div class="line">       &#125;);</div><div class="line">       React.render(<span class="tag">&lt;<span class="name">TodoList</span>&gt;</span><span class="tag">&lt;/<span class="name">TodoList</span>&gt;</span>, document.body);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="JS模拟动画介绍"><a href="#JS模拟动画介绍" class="headerlink" title="JS模拟动画介绍"></a>JS模拟动画介绍</h2><blockquote>
<p>什么是JS动画</p>
</blockquote>
<p>为了<strong>兼容</strong>不支持CSS3的浏览器，用JS来模拟CSS3动画的效果<br>动画 = 连续播放的静止页面 ← 帧<br>transition: left 100px ease-in;  → 总时间1秒，每秒向右移动1/100px</p>
<blockquote>
<p>JS动画特点</p>
</blockquote>
<p>兼容性强，适用于对浏览器兼容要求较高的项目<br>编写难度较大，通常不会手写代码，而是直接使用第三方库<br>性能需求大，如果改变属性过多，会占用多个浏览器渲染循环，导致卡顿</p>
<blockquote>
<p>JS动画使用方法</p>
</blockquote>
<p>function doMove() {<br>  foo.style.left=(foo.style.left+10)+’px’;<br>  <strong>setTimeout</strong>(doMove,20);<br>}</p>
<p>常见的JS模拟动画用法</p>
<p>function doMove() {<br>  foo.style.left=(foo.style.left+10)+’px’;<br>  setTimeout(doMove,20);<br>  <strong>this.setState</strong>(…);<br>}</p>
<p>React中JS模拟动画用法</p>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>2、在React中使用JS模拟动画</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="undefined"></span></div><div class="line">       var Positioner = React.createClass(&#123;</div><div class="line">           getInitialState: function() &#123;</div><div class="line">               return &#123;</div><div class="line">                   position: 0</div><div class="line">               &#125;;</div><div class="line">           &#125;,</div><div class="line">           resolveSetTimeout: function() &#123;</div><div class="line">               if (this.state.position &lt; this.props.position) &#123;</div><div class="line">                   this.setState(&#123;</div><div class="line">                       position: this.state.position + 1</div><div class="line">                   &#125;);</div><div class="line">               &#125;</div><div class="line">           &#125;,</div><div class="line">           componentDidUpdate: function() &#123;</div><div class="line">               if (this.props.position) &#123;</div><div class="line">                   setTimeout(this.resolveSetTimeout, this.props.timeoutMs);</div><div class="line">               &#125;</div><div class="line">           &#125;,</div><div class="line">           render: function() &#123;</div><div class="line">                   var divStyle = &#123;</div><div class="line">                       marginLeft: this.state.position</div><div class="line">                   &#125;;</div><div class="line">                   return &lt;div style=&#123;divStyle&#125;&gt; This will animate! &lt;/div&gt; </div><div class="line">               &#125; </div><div class="line">           &#125;) </div><div class="line">       React.render(&lt;Positioner&gt;&lt;/Positioner&gt;, document.body);</div><div class="line">       React.render(&lt;Positioner position=&#123;100&#125; timeoutMs=&#123;10&#125;&gt;&lt;/Positioner&gt;, document.body);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="rAF动画介绍"><a href="#rAF动画介绍" class="headerlink" title="rAF动画介绍"></a>rAF动画介绍</h2><blockquote>
<p>什么是rAF动画</p>
</blockquote>
<p>rAF = requestAnimationFrame<br><strong>优化</strong>过的JS模拟动画<br>由于JS动画使用广泛但是性能差，因此提出rAF标准，用于优化性能</p>
<p><img src="/images/QQ截图20161208200214.png" alt="Alt text"></p>
<p>普通JS模拟动画原理</p>
<p><img src="/images/QQ截图20161208200225.png" alt="Alt text"></p>
<p>rAF原理</p>
<blockquote>
<p>rAF动画特点</p>
</blockquote>
<p>兼容性一般，IE <strong>10+</strong><br>性能较强，但是具体优化效果取决于浏览器<br>编写难度稍大，需要将动画转换成具体函数</p>
<blockquote>
<p>rAF动画使用方法</p>
</blockquote>
<p><img src="/images/1481198683382.png" alt="Alt text"></p>
<p>常见的rAF动画用法</p>
<p><img src="/images/1481198691428.png" alt="Alt text"></p>
<p>React中rAF动画用法</p>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>3、在React中使用rAF动画</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="undefined"></span></div><div class="line">       var Positioner = React.createClass(&#123;</div><div class="line">           getInitialState: function() &#123;</div><div class="line">               return &#123;</div><div class="line">                   position: 0</div><div class="line">               &#125;;</div><div class="line">           &#125;,</div><div class="line">           resolveSetTimeout: function() &#123;</div><div class="line">               if (this.state.position &lt; this.props.position) &#123;</div><div class="line">                   this.setState(&#123;</div><div class="line">                       position: this.state.position + 1</div><div class="line">                   &#125;);</div><div class="line">               &#125;</div><div class="line">           &#125;,</div><div class="line">           componentDidUpdate: function() &#123;</div><div class="line">               if (this.props.position) &#123;</div><div class="line">                   requestAnimationFrame(this.resolveSetTimeout);</div><div class="line">               &#125;</div><div class="line">           &#125;,</div><div class="line">           render: function() &#123;</div><div class="line">                   var divStyle = &#123;</div><div class="line">                       marginLeft: this.state.position</div><div class="line">                   &#125;;</div><div class="line">                   return &lt;div style=&#123;divStyle&#125;&gt; This will animate! &lt;/div&gt; </div><div class="line">               &#125; </div><div class="line">           &#125;) </div><div class="line">       React.render(&lt;Positioner&gt;&lt;/Positioner&gt;, document.body);</div><div class="line">       React.render(&lt;Positioner position=&#123;100&#125;&gt;&lt;/Positioner&gt;, document.body);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre>
  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> 酶窝 </p>
      <p class="subtitle"> 酶窝 </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="动画效果乱炖"><a href"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'http://yoursite.com/2016/12/08/动画效果乱炖/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
