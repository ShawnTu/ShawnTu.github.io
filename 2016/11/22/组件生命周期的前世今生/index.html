<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>组件生命周期的前世今生 | 酶窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2016/11/22/组件生命周期的前世今生/">组件生命周期的前世今生</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">November 22 2016</p>
  </section>

  <section class="article-entry">
    <h1 id="组件生命周期的前世今生"><a href="#组件生命周期的前世今生" class="headerlink" title="组件生命周期的前世今生"></a>组件生命周期的前世今生</h1><h2 id="什么是生命周期"><a href="#什么是生命周期" class="headerlink" title="什么是生命周期"></a>什么是生命周期</h2><blockquote>
<p>组件的生命周期</p>
</blockquote>
<p>组件本质上是<strong>状态机</strong>，输入确定，输出一定确定。<br>状态发生<strong>转换</strong>时会触发不同的钩子函数，从而让开发者有机会做出响应。<br>可以用<strong>事件</strong>的思路来理解状态。</p>
<p><img src="/images/QQ截图20161123203214.png" alt="Alt text"></p>
<blockquote>
<p>不同生命周期内可以自定义的函数</p>
</blockquote>
<p><img src="/images/QQ截图20161123203506.png" alt="Alt text"></p>
<p><img src="/images/QQ截图20161123203516.png" alt="Alt text"></p>
<p><img src="/images/QQ截图20161123203524.png" alt="Alt text"></p>
<h2 id="初始化阶段介绍"><a href="#初始化阶段介绍" class="headerlink" title="初始化阶段介绍"></a>初始化阶段介绍</h2><blockquote>
<p>初始化阶段函数介绍</p>
</blockquote>
<p>初始化阶段可以使用的函数：</p>
<ul>
<li><code>getDefaultProps</code>：只调用一次，实例之间<strong>共享引用</strong></li>
<li><code>getInitialState</code>：初始化每个实例特有的<strong>状态</strong></li>
<li><code>componentWillMount</code>：render之前最后一次<strong>修改状态</strong>的机会</li>
<li><code>render</code>：只能访问this.props和this.state，只有一个顶层组件，<strong>不允许</strong>修改状态和DOM输出</li>
<li><code>componentDidMount</code>：成功render并渲染完成真实DOM之后触发，<strong>可以</strong>修改DOM</li>
</ul>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>初始化阶段-触发顺序</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">    	var style = &#123;</div><div class="line">    		color: "red",</div><div class="line">    		border: "1px #000 solid",</div><div class="line">    	&#125;;</div><div class="line">    	var HelloWorld = React.createClass(&#123;</div><div class="line">            getDefaultProps: function () &#123;</div><div class="line">                console.log("getDefaultProps, 1")</div><div class="line">            &#125;,</div><div class="line">            getInitialState: function () &#123;</div><div class="line">                console.log("getInitialState, 2");</div><div class="line">                return null;</div><div class="line">            &#125;,</div><div class="line">            componentWillMount: function () &#123;</div><div class="line">                console.log("componentWillMount, 3")</div><div class="line">            &#125;,</div><div class="line">    		render: function () &#123;</div><div class="line">                console.log("render, 4")</div><div class="line">    			return <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">"childp"</span>&gt;</span>Hello, &#123;(function (obj) &#123;</div><div class="line">    				if (obj.props.name)</div><div class="line">    					return obj.props.name</div><div class="line">    				else</div><div class="line">    					return "World"</div><div class="line">    			&#125;)(this)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    		&#125;,</div><div class="line">            componentDidMount: function () &#123;</div><div class="line">                console.log("componentDidMount, 5")</div><div class="line">            &#125;,</div><div class="line">    	&#125;);</div><div class="line">    	React.render(<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>, document.body);</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>初始化阶段-各函数正确用法</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">       $(document).ready(</div><div class="line">           function() &#123;</div><div class="line">               var count = 0;</div><div class="line">               var style = &#123;</div><div class="line">                   color: "red",</div><div class="line">                   border: "1px #000 solid",</div><div class="line">               &#125;;</div><div class="line">               var HelloWorld = React.createClass(&#123;</div><div class="line">                   getDefaultProps: function () &#123;</div><div class="line">                       console.log("getDefaultProps, 1");</div><div class="line">                       return &#123;name: "Tom"&#125;;</div><div class="line">                   &#125;,</div><div class="line">                   getInitialState: function () &#123;</div><div class="line">                       console.log("getInitialState, 2");</div><div class="line">                       return &#123;myCount: count++,</div><div class="line">                               ready: false&#125;;</div><div class="line">                   &#125;,</div><div class="line">                   componentWillMount: function () &#123;</div><div class="line">                       console.log("componentWillMount, 3");</div><div class="line">                       this.setState(&#123;ready: true&#125;);</div><div class="line">                   &#125;,</div><div class="line">                   render: function () &#123;</div><div class="line">                       console.log("render, 4");</div><div class="line">                       return <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">"childp"</span>&gt;</span>Hello, &#123;this.props.name ? this.props.name : "World"&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span>&#123;"" + this.state.ready&#125; &#123;this.state.myCount&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">                   &#125;,</div><div class="line">                   componentDidMount: function () &#123;</div><div class="line">                       console.log("componentDidMount, 5");</div><div class="line">                       $(React.findDOMNode(this)).append("surprise!");</div><div class="line">                   &#125;,</div><div class="line">               &#125;);</div><div class="line">               React.render(<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>, document.body);</div><div class="line">           &#125;</div><div class="line">       );</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="运行中阶段介绍"><a href="#运行中阶段介绍" class="headerlink" title="运行中阶段介绍"></a>运行中阶段介绍</h2><blockquote>
<p>运行中阶段函数介绍</p>
</blockquote>
<p>运行中阶段可以使用的函数：</p>
<ul>
<li><code>componentWillReceiveProps</code>：父组件修改属性触发，<strong>可以</strong>修改新属性、修改状态</li>
<li><code>shouldComponentUpdate</code>：返回false会<strong>阻止</strong>render调用</li>
<li><code>componentWillUpdate</code>：<strong>不能</strong>修改属性和状态</li>
<li><code>render</code>：只能访问this.props和this.state，只有一个顶层组件，<strong>不允许</strong>修改状态和DOM输出</li>
<li><code>componentDidUpdate</code>：<strong>可以</strong>修改DOM</li>
</ul>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>运行中阶段-触发顺序</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">       var style = &#123;</div><div class="line">           color: "red",</div><div class="line">           border: "1px #000 solid",</div><div class="line">       &#125;;</div><div class="line">       var HelloWorld = React.createClass(&#123;</div><div class="line">           componentWillReceiveProps: function () &#123;</div><div class="line">               console.log("componentWillReceiveProps 1");</div><div class="line">           &#125;,</div><div class="line">           shouldComponentUpdate: function () &#123;</div><div class="line">               console.log("shouldComponentUpdate 2");</div><div class="line">               return true;</div><div class="line">           &#125;,</div><div class="line">           componentWillUpdate: function () &#123;</div><div class="line">               console.log("componentWillUpdate 3")</div><div class="line">           &#125;,</div><div class="line">           render: function () &#123; </div><div class="line">               console.log("render 4");</div><div class="line">               return <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, &#123;this.props.name ? this.props.name : "World"&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">           &#125;,</div><div class="line">           componentDidUpdate: function() &#123;</div><div class="line">               console.log("componentDidUpdate 5");</div><div class="line">           &#125;,</div><div class="line">       &#125;);</div><div class="line">       var HelloUniverse = React.createClass(&#123;</div><div class="line">           getInitialState: function () &#123;</div><div class="line">               return &#123;name: ''&#125;;</div><div class="line">           &#125;,</div><div class="line">           handleChange: function (event) &#123;</div><div class="line">               this.setState(&#123;name: event.target.value&#125;);</div><div class="line">           &#125;,</div><div class="line">           render: function () &#123;</div><div class="line">               return <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name</span>=<span class="string">&#123;this.state.name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           &#125;,</div><div class="line">       &#125;);</div><div class="line">       React.render(<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>, document.body);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>运行中阶段-各函数正确用法</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">       $(document).ready(</div><div class="line">           function() &#123;</div><div class="line">               var style = &#123;</div><div class="line">                   color: "red",</div><div class="line">                   border: "1px #000 solid",</div><div class="line">               &#125;;</div><div class="line">               var HelloWorld = React.createClass(&#123;</div><div class="line">                   componentWillReceiveProps: function (newProps) &#123;</div><div class="line">                       console.log("componentWillReceiveProps 1");</div><div class="line">                       console.log(newProps);</div><div class="line">                   &#125;,</div><div class="line">                   shouldComponentUpdate: function () &#123;</div><div class="line">                       console.log("shouldComponentUpdate 2");</div><div class="line">                       return true;</div><div class="line">                   &#125;,</div><div class="line">                   componentWillUpdate: function () &#123;</div><div class="line">                       console.log("componentWillUpdate 3");</div><div class="line">                   &#125;,</div><div class="line">                   render: function () &#123; </div><div class="line">                       console.log("render 4");</div><div class="line">                       return <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, &#123;this.props.name ? this.props.name : "World"&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">                   &#125;,</div><div class="line">                   componentDidUpdate: function() &#123;</div><div class="line">                       $(React.findDOMNode(this)).append("surprise!");</div><div class="line">                   &#125;,</div><div class="line">               &#125;);</div><div class="line">               var HelloUniverse = React.createClass(&#123;</div><div class="line">                   getInitialState: function () &#123;</div><div class="line">                       return &#123;name: ''&#125;;</div><div class="line">                   &#125;,</div><div class="line">                   handleChange: function (event) &#123;</div><div class="line">                       this.setState(&#123;name: event.target.value&#125;);</div><div class="line">                   &#125;,</div><div class="line">                   render: function () &#123;</div><div class="line">                       return <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                       <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name</span>=<span class="string">&#123;this.state.name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></div><div class="line">                       <span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">                       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">                       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                   &#125;,</div><div class="line">               &#125;);</div><div class="line">               React.render(<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>, document.body);</div><div class="line">           &#125;</div><div class="line">       );</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="销毁阶段介绍"><a href="#销毁阶段介绍" class="headerlink" title="销毁阶段介绍"></a>销毁阶段介绍</h2><blockquote>
<p>销毁阶段函数介绍</p>
</blockquote>
<p>销毁阶段可以使用的函数：</p>
<ul>
<li><code>componentWillUnmount</code>：在删除组件之前进行<strong>清理</strong>操作，比如计时器和事件监听器</li>
</ul>
<blockquote>
<p>实例演示</p>
</blockquote>
<p>销毁阶段-各函数正确用法</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./react-0.13.2/react-0.13.2/build/JSXTransformer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/jsx"</span>&gt;</span><span class="xml"></span></div><div class="line">       var style = &#123;</div><div class="line">           color: "red",</div><div class="line">           border: "1px #000 solid",</div><div class="line">       &#125;;</div><div class="line">       var HelloWorld = React.createClass(&#123;</div><div class="line">           render: function () &#123; </div><div class="line">               console.log("render 4");</div><div class="line">               return <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, &#123;this.props.name ? this.props.name : "World"&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">           &#125;,</div><div class="line">           componentWillUnmount: function() &#123;</div><div class="line">               console.log("BOOOOOOOOOOOOOOOOOM!");</div><div class="line">           &#125;,</div><div class="line">       &#125;);</div><div class="line">       var HelloUniverse = React.createClass(&#123;</div><div class="line">           getInitialState: function () &#123;</div><div class="line">               return &#123;name: ''&#125;;</div><div class="line">           &#125;,</div><div class="line">           handleChange: function (event) &#123;                </div><div class="line">               if (event.target.value == "123") &#123;</div><div class="line">                   React.unmountComponentAtNode(document.getElementsByTagName("body")[0]);</div><div class="line">                   return;</div><div class="line">               &#125;</div><div class="line">               this.setState(&#123;name: event.target.value&#125;);</div><div class="line">           &#125;,</div><div class="line">           render: function () &#123;</div><div class="line">               return <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name</span>=<span class="string">&#123;this.state.name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           &#125;,</div><div class="line">       &#125;);</div><div class="line">       React.render(<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloUniverse</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>, document.body);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre>
  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> 酶窝 </p>
      <p class="subtitle"> 酶窝 </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="组件生命周期的前世今生"><a"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'http://yoursite.com/2016/11/22/组件生命周期的前世今生/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
